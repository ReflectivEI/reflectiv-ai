<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="theme-color" content="#0c2740">
  <title>ReflectivAI â€“ AI Sales Enablement for Life Sciences</title>
  <link rel="icon" type="image/png" href="logo-modern.png">

  <!-- Content Security Policy (meta-based; GH Pages can't set headers) -->
  <!-- Allows Google Fonts + your Worker -->
  <meta http-equiv="Content-Security-Policy" content="
          default-src 'self';
          img-src 'self' data:;
          style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;
          font-src  'self' https://fonts.gstatic.com;
          script-src 'self' 'unsafe-inline';
          connect-src 'self' https://my-chat-agent-v2.tonyabdelmalak.workers.dev
        ">

  <!-- Performance: preconnect for Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <link rel="stylesheet" href="assets/css/tailwind.css">

  <!-- Type + quick utilities -->
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');

    :root {
      --navy: #0f2747;
      --navy-2: #0b3954;
      --teal: #20bfa9;
      --ink: #1e2a3a;
      --soft: #eef4fa;
      --card: #ffffff;
      --line: #d9e3ef;
      --shadow: 0 12px 28px rgba(12, 39, 64, .14);
    }

    html {
      scroll-behavior: smooth
    }

    body {
      font-family: 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background: #f8fafc;
      color: #0f172a
    }

    .primary-dark {
      background-color: #1E3A8A
    }

    .text-primary-dark {
      color: #1E3A8A
    }

    .accent-teal {
      background-color: #06B6D4
    }

    .text-accent-teal {
      color: #06B6D4
    }

    .section-separator {
      width: 80px;
      height: 4px;
      margin-bottom: 24px;
      border-radius: 9999px;
      background-color: #06B6D4
    }

    .sticky-header {
      transition: all .3s ease-in-out
    }

    .grid-mobile-center {
      text-align: center
    }

    @media (min-width:768px) {
      .grid-mobile-center {
        text-align: left
      }
    }

    /* -------- Modal system (self-contained) -------- */
    .modal {
      position: fixed;
      inset: 0;
      z-index: 10000;
      display: none
    }

    .modal.open {
      display: block
    }

    .modal::before {
      content: "";
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, .4)
    }

    .modal-box {
      position: relative;
      background: #fff;
      border-radius: 16px;
      box-shadow: var(--shadow);
      width: min(920px, 92vw);
      margin: 8vh auto 0;
      overflow: hidden
    }

    .modal-head {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 16px;
      border-bottom: 1px solid #e5e7eb
    }

    .modal-title {
      font-weight: 800;
      color: #0f2747
    }

    .modal-close {
      border: 0;
      background: transparent;
      padding: 6px 10px;
      border-radius: 10px;
      color: #475569;
      cursor: pointer
    }

    .modal-close:hover {
      background: #f1f5f9
    }

    /* -------- Coach container shell -------- */
    #coachBody {
      padding: 0;
      background: #fff
    }

    #reflectiv-widget {
      min-height: 520px
    }

    /* -------- Alora FAB + panel (self-contained) -------- */
    #aloraFab {
      position: fixed;
      right: 20px;
      bottom: 20px;
      width: 56px;
      height: 56px;
      border-radius: 999px;
      border: none;
      background: #0f2747;
      color: #fff;
      box-shadow: 0 12px 24px rgba(15, 39, 71, .25);
      cursor: pointer;
      z-index: 10001
    }

    #aloraFab svg {
      width: 28px;
      height: 28px
    }

    .alora {
      position: fixed;
      right: 20px;
      bottom: 92px;
      width: min(380px, 92vw);
      max-height: min(72vh, 820px);
      display: flex;
      flex-direction: column;
      border: 1px solid #e5e7eb;
      border-radius: 16px;
      background: #fff;
      box-shadow: var(--shadow);
      overflow: hidden;
      opacity: 0;
      pointer-events: none;
      transform: translateY(8px);
      transition: .18s ease-out;
      z-index: 10001
    }

    .alora.open {
      opacity: 1;
      pointer-events: auto;
      transform: translateY(0)
    }

    .alora-head {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 12px;
      border-bottom: 1px solid #e5e7eb;
      background: #0f2747;
      color: #fff
    }

    .alora-title {
      font-weight: 700
    }

    .alora-close {
      border: 0;
      background: transparent;
      color: #fff;
      font-size: 18px;
      cursor: pointer;
      padding: 4px 8px;
      border-radius: 8px
    }

    .alora-close:hover {
      background: rgba(255, 255, 255, .12)
    }

    .alora-body {
      padding: 12px;
      height: 340px;
      overflow: auto;
      background: #fafbff
    }

    .alora-msg {
      margin: 8px 0;
      padding: 10px 12px;
      border: 1px solid #e5e7eb;
      border-radius: 12px;
      background: #fff;
      font-size: 14px
    }

    .alora-msg.user {
      margin-left: auto;
      background: #0f2747;
      color: #fff;
      border-color: #0f2747
    }

    .alora-typing {
      font-size: 12px;
      color: #475569;
      margin: 6px 2px
    }

    .alora-input {
      display: flex;
      gap: 8px;
      padding: 10px;
      border-top: 1px solid #e5e7eb;
      background: #fff
    }

    .alora-input input {
      flex: 1;
      border: 1px solid #e5e7eb;
      border-radius: 999px;
      padding: 10px 14px;
      font-size: 14px
    }

    .alora-input .btn.primary {
      border: 0;
      border-radius: 999px;
      padding: 10px 14px;
      background: #20bfa9;
      color: #083344;
      cursor: pointer;
      font-weight: 700
    }

    .alora-input .btn.primary:hover {
      filter: brightness(.95)
    }

    /* chips injected by JS */
    .alora-suggest {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin: 8px 0 0
    }

    .alora-chip {
      border: 1px solid #0f2747;
      border-radius: 999px;
      padding: 6px 10px;
      background: #fff;
      color: #0f2747;
      font: 600 12px/1.1 Inter, system-ui;
      cursor: pointer
    }

    .alora-chip:hover {
      background: #eef4fa
    }

    /* Simple nav styles for mobile toggle */
    .site_header {
      background: #0f2747;
      width: 100%
    }

    .site_header .nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      color: #fff;
      padding: 16px 32px;
      max-width: 1400px;
      margin: 0 auto
    }

    .site_header .brand {
      display: flex;
      gap: 10px;
      align-items: center;
      color: #fff;
      text-decoration: none;
      font-weight: 800;
      font-size: 1.25rem
    }

    .site_header .brand img {
      width: 42px;
      height: 42px
    }

    .site_header .nav-links {
      display: flex;
      gap: 28px;
      align-items: center
    }

    .site_header .nav-links a {
      color: #fff;
      text-decoration: none;
      font-weight: 500;
      font-size: 0.95rem;
      transition: color 0.2s
    }

    .site_header .nav-links a:hover {
      color: #20bfa9
    }

    .site_header .dropdown {
      position: relative
    }

    .site_header .dropdown-menu {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
      background: #fff;
      color: #0f2747;
      border: 1px solid #e5e7eb;
      border-radius: 10px;
      min-width: 220px;
      box-shadow: var(--shadow);
      padding: 8px
    }

    .site_header .dropdown:hover .dropdown-menu {
      display: block
    }

    .site_header .dropdown-menu a {
      display: block;
      padding: 8px 10px;
      color: #0f2747
    }

    .site_header .btn-demo {
      padding: 10px 20px;
      border: 2px solid #20bfa9;
      border-radius: 999px;
      background: #20bfa9;
      color: #083344;
      font-weight: 700;
      font-size: 0.95rem;
      transition: all 0.2s
    }

    .site_header .btn-demo:hover {
      background: #1aa896;
      border-color: #1aa896;
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(32, 191, 169, 0.3)
    }

    .hamburger {
      display: none;
      border: 0;
      background: transparent;
      color: #fff
    }

    .hamburger span {
      display: block;
      width: 22px;
      height: 2px;
      background: #fff;
      margin: 5px 0
    }

    @media (max-width: 900px) {
      .site_header .nav-links {
        display: none;
        position: absolute;
        right: 12px;
        top: 56px;
        flex-direction: column;
        background: #0f2747;
        border: 1px solid rgba(255, 255, 255, .12);
        border-radius: 12px;
        padding: 12px
      }

      .site_header .nav-links.open {
        display: flex
      }

      .hamburger {
        display: block
      }
    }
  </style>

  <!-- Flip Card Styles & Animations -->
  <style>
    /* Flip card container */
    .metric-card {
      perspective: 1000px;
      height: 200px;
    }

    .metric-card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.6s;
      transform-style: preserve-3d;
    }

    .metric-card.is-flipped .metric-card-inner {
      transform: rotateY(180deg);
    }

    .metric-card-front,
    .metric-card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .metric-card-back {
      transform: rotateY(180deg);
    }

    /* Fade-in animation for sections */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .animate-fade-in {
      animation: fadeInUp 0.6s ease-out;
    }

    /* Stagger animation for children */
    .stagger-animation>* {
      opacity: 0;
      animation: fadeInUp 0.6s ease-out forwards;
    }

    .stagger-animation>*:nth-child(1) {
      animation-delay: 0.1s;
    }

    .stagger-animation>*:nth-child(2) {
      animation-delay: 0.2s;
    }

    .stagger-animation>*:nth-child(3) {
      animation-delay: 0.3s;
    }

    .stagger-animation>*:nth-child(4) {
      animation-delay: 0.4s;
    }

    .stagger-animation>*:nth-child(5) {
      animation-delay: 0.5s;
    }
  </style>

  <!-- Site CSS (keep external if you want broader styles) -->
  <link rel="stylesheet" href="styles.css?v=20251021B">

  <!-- Coach styles (keep if you rely on widget.css visuals) -->
  <link rel="stylesheet" href="widget.css?v=20251021-4">

  <!-- Endpoints (normalize: provide base and per-feature endpoints) -->
  <script>
    // Base Worker (no trailing /chat). Widget now strips /chat if present.
    (function () {
      const BASE = 'https://my-chat-agent-v2.tonyabdelmalak.workers.dev';
      window.WORKER_URL = BASE;
      window.COACH_ENDPOINT = BASE + '/chat';
      window.ALORA_ENDPOINT = BASE + '/chat';
    })();
  </script>

  <!-- Optional: persona system string for Alora -->
  <script>
    window.ALORA_PERSONA = {
      system: "Alora: friendly, professional, EI-first product guide for ReflectivAI. She understands ReflectivAIâ€™s AI-driven coaching, role-play, analytics, emotional intelligence framework, and platform integrations, and can explain any feature or benefit contextually."
    };
  </script>

  <!-- Coach script: context helpers first, then widget -->
  <script src="assets/chat/ei-context.js?v=1"></script>
  <script defer src="widget.js?v=20251121-0001"></script>

  <!-- Ensure Alora sits on top -->
  <style>
    #aloraFab {
      z-index: 10001;
      pointer-events: auto
    }

    .alora {
      z-index: 10001
    }
  </style>

  <!-- Referrer policy (minor CS hardening) -->
  <meta name="referrer" content="strict-origin-when-cross-origin">
</head>

<body class="bg-slate-50">
  <noscript>
    <div style="background:#0f2747;color:#fff;padding:10px 16px;text-align:center">
      JavaScript is required to use ReflectivAIâ€™s interactive coach and help assistant.
    </div>
  </noscript>

  <!-- Header & Navigation (Navy bg, Teal underline) -->
  <header class="site_header fixed top-0 left-0 w-full z-50">
    <nav class="nav" aria-label="Primary">
      <!-- Brand -->
      <a href="#home" class="brand" aria-label="ReflectivAI home">
        <img src="logo-modern.png" alt="" width="36" height="36" />
        <span>ReflectivAI</span>
      </a>

      <!-- Links + Dropdowns -->
      <ul class="nav-links" id="navLinks" role="menubar" aria-label="Main menu">
        <li class="dropdown" role="none">
          <a href="#platform" role="menuitem" aria-haspopup="true" aria-expanded="false">Platform â–¾</a>
          <ul class="dropdown-menu" role="menu" aria-label="Platform submenu">
            <li role="none"><a role="menuitem" href="#simulations">Simulations</a></li>
            <li role="none"><a role="menuitem" href="#coach">AI Coach</a></li>
            <li role="none"><a role="menuitem" href="#learning">Learning Center</a></li>
          </ul>
        </li>
        <li role="none"><a role="menuitem" href="analytics.html">Analytics</a></li>
        <li class="dropdown" role="none">
          <a href="#about-ei" role="menuitem" aria-haspopup="true" aria-expanded="false">About EI â–¾</a>
          <ul class="dropdown-menu" role="menu" aria-label="About EI submenu">
            <li role="none"><a role="menuitem" href="https://www.eqmentor.com/emotional-intelligence-assessment"
                target="_blank" rel="noopener">Take EI Assessment</a></li>
            <li role="none"><a role="menuitem" href="#" onclick="openAboutEI();return false;">EI Overview</a></li>
            <li role="none"><a role="menuitem" href="ei-score-details.html">EI Score Breakdown</a></li>
          </ul>
        </li>
        <li role="none"><a role="menuitem" href="#ethics">Ethics</a></li>
        <li role="none"><a role="menuitem" href="#contact" class="btn-demo">Request Demo</a></li>
      </ul>

      <!-- Mobile hamburger -->
      <button class="hamburger" id="navHamburger" aria-label="Menu" aria-controls="navLinks" aria-expanded="false">
        <span></span><span></span><span></span>
      </button>
    </nav>
  </header>
  <!-- spacer so content isn't covered -->
  <div style="height:64px"></div>

  <!-- ===== Hero ===== -->
  <section class="py-16 md:py-24 bg-white" id="home">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 grid md:grid-cols-2 gap-8 md:gap-10 items-start">
      <!-- Left Column: Text + CTAs + Image (Flexbox for vertical alignment) -->
      <div class="grid-mobile-center flex flex-col h-full">
        <!-- Text Block -->
        <div class="flex-shrink-0">
          <span class="text-sm font-semibold uppercase text-accent-teal tracking-widest mb-3 block">AI Sales Enablement
            for Life Sciences</span>
          <h1 class="text-4xl sm:text-5xl font-extrabold text-gray-900 leading-tight mb-6">Connect and Convert with
            Intelligence</h1>
          <p class="text-lg sm:text-xl text-gray-600 mb-8">ReflectivAI blends clinical accuracy, emotional intelligence,
            and adaptive AI coaching so every HCP conversation feels authentic, confident, and compliant.</p>
        </div>

        <!-- CTA Buttons - Centered -->
        <div class="flex flex-col sm:flex-row gap-4 mb-10 justify-center md:justify-start">
          <a href="#contact"
            class="px-8 py-3 rounded-full primary-dark text-white font-bold shadow-xl hover:bg-indigo-900 transition transform hover:scale-[1.02] text-center inline-block">Request
            a Demo</a>
          <a id="openCoach" href="#simulations"
            class="px-8 py-3 rounded-full bg-white text-primary-dark border-4 font-bold hover:bg-indigo-50 hover:text-indigo-900 transition text-center inline-block"
            style="border-color: #1E3A8A;">Explore
            Platform</a>
        </div>

        <!-- Hero Image Below CTA Buttons -->
        <div class="w-full flex-shrink-0">
          <div class="rounded-xl overflow-hidden shadow-xl">
            <img src="assets/hero-image.png" alt="HCP conversation with analytics overlay"
              class="w-full h-auto object-cover"
              onerror="this.onerror=null;this.src='https://via.placeholder.com/560x350?text=Image+Not+Found';this.alt='Image not found';" />
          </div>
        </div>
      </div>

      <!-- Right Column: Main Hero Image (Reduced height to align with left column) -->
      <div class="rounded-xl overflow-hidden shadow-2xl mt-8 md:mt-0"
        style="height:auto;display:flex;align-items:stretch;aspect-ratio:3/4;" aria-hidden="true">
        <img src="assets/site_image 1.png" alt="ReflectivAI Platform Overview" class="w-full h-full object-cover"
          style="object-position:center top;"
          onerror="this.onerror=null;this.src='https://via.placeholder.com/500x650?text=Image+Not+Found';this.alt='Image not found';" />
      </div>
    </div>
  </section>

  <!-- ===== Why ===== -->
  <!-- BEGIN: Traditional Training vs ReflectivAI Impact Infographic Section -->
  <section id="comparison" class="py-16 md:py-20 bg-gray-50 border-t border-gray-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-3xl md:text-4xl font-extrabold text-gray-900 mb-4">
          Traditional Training vs ReflectivAI Impact
        </h2>
        <div class="w-20 mx-auto section-separator"></div>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto">
          See how ReflectivAI transforms pharmaceutical sales training from static workshops to dynamic, emotionally
          intelligent practice.
        </p>
      </div>

      <!-- 3-column comparison grid -->
      <div class="grid md:grid-cols-3 gap-8 items-start">
        <!-- Column 1: Traditional Training -->
        <div class="bg-white p-8 rounded-xl shadow-md border border-gray-200">
          <h3 class="text-xl font-bold text-gray-900 mb-4 text-center">Traditional Training</h3>
          <ul class="space-y-3 text-gray-700">
            <li class="flex items-start">
              <svg class="h-5 w-5 text-gray-400 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor"
                viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10" stroke-width="2"></circle>
                <line x1="12" y1="8" x2="12" y2="12" stroke-width="2"></line>
                <line x1="12" y1="16" x2="12.01" y2="16" stroke-width="2"></line>
              </svg>
              <span>One-time workshops with limited follow-up</span>
            </li>
            <li class="flex items-start">
              <svg class="h-5 w-5 text-gray-400 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor"
                viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10" stroke-width="2"></circle>
                <line x1="12" y1="8" x2="12" y2="12" stroke-width="2"></line>
                <line x1="12" y1="16" x2="12.01" y2="16" stroke-width="2"></line>
              </svg>
              <span>Static role-plays with limited scenarios</span>
            </li>
            <li class="flex items-start">
              <svg class="h-5 w-5 text-gray-400 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor"
                viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10" stroke-width="2"></circle>
                <line x1="12" y1="8" x2="12" y2="12" stroke-width="2"></line>
                <line x1="12" y1="16" x2="12.01" y2="16" stroke-width="2"></line>
              </svg>
              <span>Delayed feedback from managers</span>
            </li>
            <li class="flex items-start">
              <svg class="h-5 w-5 text-gray-400 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor"
                viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10" stroke-width="2"></circle>
                <line x1="12" y1="8" x2="12" y2="12" stroke-width="2"></line>
                <line x1="12" y1="16" x2="12.01" y2="16" stroke-width="2"></line>
              </svg>
              <span>Minimal focus on emotional intelligence</span>
            </li>
            <li class="flex items-start">
              <svg class="h-5 w-5 text-gray-400 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor"
                viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10" stroke-width="2"></circle>
                <line x1="12" y1="8" x2="12" y2="12" stroke-width="2"></line>
                <line x1="12" y1="16" x2="12.01" y2="16" stroke-width="2"></line>
              </svg>
              <span>Difficult to scale across field force</span>
            </li>
          </ul>
        </div>

        <!-- Column 2: Visual/Summary -->
        <div class="flex flex-col items-center justify-center text-center p-8">
          <svg class="h-16 w-16 text-accent-teal mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
          </svg>
          <p class="text-lg font-semibold text-gray-700">
            Transforming training from static to adaptive, from delayed to instant, from generic to emotionally
            intelligent.
          </p>
        </div>

        <!-- Column 3: ReflectivAI Impact -->
        <div class="bg-gradient-to-br from-blue-50 to-teal-50 p-8 rounded-xl shadow-md border-2 border-accent-teal">
          <h3 class="text-xl font-bold text-gray-900 mb-4 text-center">ReflectivAI Impact</h3>
          <ul class="space-y-3 text-gray-700">
            <li class="flex items-start">
              <svg class="h-5 w-5 text-accent-teal mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor"
                viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg>
              <span><strong>AI HCP role-play</strong> with realistic personas and objections</span>
            </li>
            <li class="flex items-start">
              <svg class="h-5 w-5 text-accent-teal mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor"
                viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg>
              <span><strong>Instant coach feedback</strong> with suggested phrasing and improvements</span>
            </li>
            <li class="flex items-start">
              <svg class="h-5 w-5 text-accent-teal mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor"
                viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg>
              <span><strong>EI metrics</strong> that translate scores into coaching steps</span>
            </li>
            <li class="flex items-start">
              <svg class="h-5 w-5 text-accent-teal mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor"
                viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg>
              <span><strong>Compliance protection</strong> with label-only guardrails built in</span>
            </li>
            <li class="flex items-start">
              <svg class="h-5 w-5 text-accent-teal mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor"
                viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg>
              <span><strong>Scalable practice</strong> anytime, anywhere across your team</span>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </section>
  <!-- END: Traditional Training vs ReflectivAI Impact Infographic Section -->

  <!-- BEGIN: Why Emotional Intelligence Matters -->

  <!-- ===== Platform Modules ===== -->
  <section id="platform" class="py-16 md:py-24 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-4xl font-extrabold text-gray-900 mb-4 text-center md:text-left">
        Platform Modules
      </h2>
      <div class="section-separator mx-auto md:mx-0"></div>
      <p class="text-xl text-gray-600 mb-12 max-w-3xl text-center md:text-left mx-auto md:mx-0">
        Integrated tools designed for high-stakes life science interactions.
      </p>

      <!-- Four primary modules + Images -->
      <div class="grid md:grid-cols-3 gap-8">
        <!-- Sales Coach Card -->
        <div
          class="bg-white p-8 rounded-xl shadow-lg border border-gray-100 hover:shadow-2xl transition transform hover:scale-[1.01]">
          <div class="w-12 h-12 accent-teal rounded-xl flex items-center justify-center mb-4">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
              <polyline points="14 2 14 8 20 8"></polyline>
            </svg>
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-3">Sales Coach</h3>
          <p class="text-gray-600 mb-4">Practice high-stakes calls in oncology, vaccines, and other therapeutic areas
            with adaptive AI personas. Each simulation tracks not just what you say, but how you say itâ€”measuring
            empathy, tone, and active listening alongside clinical accuracy.</p>
          <ul class="space-y-2 text-sm text-gray-700">
            <li class="flex items-start"><svg class="h-4 w-4 text-accent-teal mr-2 mt-0.5 flex-shrink-0" fill="none"
                stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg><span>Dynamic HCP personas by specialty</span></li>
            <li class="flex items-start"><svg class="h-4 w-4 text-accent-teal mr-2 mt-0.5 flex-shrink-0" fill="none"
                stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg><span>Real-time objection handling</span></li>
            <li class="flex items-start"><svg class="h-4 w-4 text-accent-teal mr-2 mt-0.5 flex-shrink-0" fill="none"
                stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg><span>EI assessment on every exchange</span></li>
          </ul>
        </div>

        <!-- Product Knowledge Card -->
        <div
          class="bg-white p-8 rounded-xl shadow-lg border border-gray-100 hover:shadow-2xl transition transform hover:scale-[1.01]">
          <div class="w-12 h-12 accent-teal rounded-xl flex items-center justify-center mb-4">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2">
              <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
              <path d="M2 17l10 5 10-5M2 12l10 5 10-5"></path>
            </svg>
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-3">Product Knowledge</h3>
          <p class="text-gray-600 mb-4">Train on complex clinical data and regulatory messaging with compliance and
            real-time correction built in. The Coach evaluates accuracy while simultaneously teaching how to communicate
            complex science with clarity and empathy.</p>
          <ul class="space-y-2 text-sm text-gray-700">
            <li class="flex items-start"><svg class="h-4 w-4 text-accent-teal mr-2 mt-0.5 flex-shrink-0" fill="none"
                stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg><span>Label-compliant messaging only</span></li>
            <li class="flex items-start"><svg class="h-4 w-4 text-accent-teal mr-2 mt-0.5 flex-shrink-0" fill="none"
                stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg><span>Simplify complex science effectively</span></li>
            <li class="flex items-start"><svg class="h-4 w-4 text-accent-teal mr-2 mt-0.5 flex-shrink-0" fill="none"
                stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg><span>Instant correction and guidance</span></li>
          </ul>
        </div>

        <!-- Role Play Card -->
        <div
          class="bg-white p-8 rounded-xl shadow-lg border border-gray-100 hover:shadow-2xl transition transform hover:scale-[1.01]">
          <div class="w-12 h-12 accent-teal rounded-xl flex items-center justify-center mb-4">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none" />
              <path d="M8 15c1.333-2 6.667-2 8 0" stroke="currentColor" stroke-width="2" fill="none" />
              <circle cx="9" cy="10" r="1" fill="currentColor" />
              <circle cx="15" cy="10" r="1" fill="currentColor" />
            </svg>
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-3">Role Play</h3>
          <p class="text-gray-600 mb-4">Hone your skills and emotional awareness in a safe, judgment-free practice
            arena. Role Play lets you rehearse complex scenarios and experiment with authentic, EI-driven communication
            before entering formal evaluation. No scoringâ€”just pure practice fostering confidence, conversational
            agility, and more human connections.</p>
          <ul class="space-y-2 text-sm text-gray-700">
            <li class="flex items-start"><svg class="h-4 w-4 text-accent-teal mr-2 mt-0.5 flex-shrink-0" fill="none"
                stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg><span>Unlimited open-ended practice sessions</span></li>
            <li class="flex items-start"><svg class="h-4 w-4 text-accent-teal mr-2 mt-0.5 flex-shrink-0" fill="none"
                stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg><span>Explore scenarios by specialty or challenge</span></li>
            <li class="flex items-start"><svg class="h-4 w-4 text-accent-teal mr-2 mt-0.5 flex-shrink-0" fill="none"
                stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg><span>Build fluency, emotional agility, and confidenceâ€”risk-free</span></li>
          </ul>
        </div>

        <!-- Image: Left (below Sales Coach) -->
        <div class="rounded-xl overflow-hidden shadow-lg hover:shadow-2xl transition transform hover:scale-[1.02]">
          <img src="assets/site_image7.png" alt="ReflectivAI Platform Interface" class="w-full h-auto object-cover"
            onerror="this.onerror=null;this.src='https://via.placeholder.com/400x320?text=Image+Not+Found';this.alt='Image not found';" />
        </div>

        <!-- Relationship Intelligence Card (Moved to Middle) -->
        <div
          class="bg-white p-8 rounded-xl shadow-lg border border-gray-100 hover:shadow-2xl transition transform hover:scale-[1.01]">
          <div class="w-12 h-12 accent-teal rounded-xl flex items-center justify-center mb-4">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2">
              <path d="M4 19h16"></path>
              <path d="M7 15l3-6 4 5 3-9"></path>
            </svg>
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-3">Relationship Intelligence</h3>
          <p class="text-gray-600 mb-4">Track behavioral blind spots and conversational patterns. Understand empathy,
            tone calibration, and conversational agility with granular data. ReflectivAI captures EI metrics that
            traditional training misses, helping reps build authentic connections.</p>
          <ul class="list-disc list-inside text-left mx-auto" style="max-width:320px;">
            <li>Empathy &amp; tone scoring</li>
            <li>Active listening analysis</li>
            <li>Conversational agility tracking</li>
          </ul>
        </div>

        <!-- Image: Right (below Role Play) -->
        <div class="rounded-xl overflow-hidden shadow-lg hover:shadow-2xl transition transform hover:scale-[1.02]">
          <img src="assets/site_image3.png" alt="ReflectivAI Analytics Dashboard" class="w-full h-auto object-cover"
            onerror="this.onerror=null;this.src='https://via.placeholder.com/400x320?text=Image+Not+Found';this.alt='Image not found';" />
        </div>
      </div>
    </div>
  </section>

  <!-- Metric Card Modal -->
  <div id="metricModal" class="fixed inset-0 bg-black bg-opacity-60 hidden items-center justify-center z-50 p-4"
    style="backdrop-filter: blur(4px);">
    <div
      class="bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto transform transition-all duration-300 scale-95 opacity-0"
      id="metricModalContent">
      <!-- Modal content will be injected here -->
    </div>
  </div>

  <script>
    // EI Metric Data with all details
    const metricsData = [
      {
        id: 'accuracy',
        title: 'Accuracy Index',
        score: '94%',
        icon: 'ðŸŽ¯',
        color: '#0ea5e9', // sky-500
        bgColor: 'from-sky-50 to-white',
        borderColor: 'border-sky-200',
        definition: 'Measures the percentage of precise, clinically correct responses in calls.',
        calculation: '(Correct responses / Total responses) Ã— 100',
        goodIndicators: 'Always references approved sources; details match label; catches and self-corrects errors.',
        sampleDialogue: '"Doctor, based on the latest clinical guidelines, here\'s how this dosing schedule can work well for your patients."'
      },
      {
        id: 'readiness',
        title: 'Readiness Velocity',
        score: '1.4x',
        icon: 'âš¡',
        color: '#8b5cf6', // violet-500
        bgColor: 'from-violet-50 to-white',
        borderColor: 'border-violet-200',
        definition: 'Captures progress speed in learning and applying sales techniques.',
        calculation: '(Role play completions + skill improvements) / Time spent training',
        goodIndicators: 'Rapid mastery of new messaging; adapts quickly to feedback; frequent scenario completions.',
        sampleDialogue: '"Thanks for the feedbackâ€”I\'ve been updating how I explain the data so it\'s clearer and more relevant."'
      },
      {
        id: 'empathy',
        title: 'Empathy Index',
        score: '88%',
        icon: 'ðŸ’™',
        color: '#14b8a6', // teal-500
        bgColor: 'from-teal-50 to-white',
        borderColor: 'border-teal-200',
        definition: 'Scores ability to perceive and respond to HCP emotions and concerns.',
        calculation: '(Empathetic responses / Opportunities) Ã— 100',
        goodIndicators: 'Notices HCP\'s tone or hesitation; validates concerns before replying; adapts message to emotional cues.',
        sampleDialogue: '"I hear you\'re concerned about side effectsâ€”let me walk you through the most recent safety information."'
      },
      {
        id: 'compliance',
        title: 'Compliance Score',
        score: '100%',
        icon: 'âœ“',
        color: '#10b981', // emerald-500
        bgColor: 'from-emerald-50 to-white',
        borderColor: 'border-emerald-200',
        definition: 'Tracks adherence to approved messaging and regulatory guidelines.',
        calculation: '(Total compliant exchanges / All exchanges) Ã— 100',
        goodIndicators: 'No off-label claims; follows label guardrails; quickly adjusts to in-call compliance feedback.',
        sampleDialogue: '"Per the product label, this medication is approved for type 2 diabetes only. I\'m happy to share the key study details."'
      },
      {
        id: 'confidence',
        title: 'Confidence Level',
        score: '8.5/10',
        icon: 'ðŸ’ª',
        color: '#f59e0b', // amber-500
        bgColor: 'from-amber-50 to-white',
        borderColor: 'border-amber-200',
        definition: 'Assesses composure, credibility, and self-assurance during presentations.',
        calculation: 'Averaged observed confidence behaviors across interactions (scale 1â€“10)',
        goodIndicators: 'Speaks smoothly; maintains eye contact; stays on message despite pushback.',
        sampleDialogue: '"From my experience, I\'m confident this therapy offers meaningful benefits that can improve patient outcomes."'
      },
      {
        id: 'clarity',
        title: 'Clarity Index',
        score: '92%',
        icon: 'ðŸ’¡',
        color: '#3b82f6', // blue-500
        bgColor: 'from-blue-50 to-white',
        borderColor: 'border-blue-200',
        definition: 'Measures how clearly information is explained to busy HCPs.',
        calculation: '(Clear explanations / Total exchanges) Ã— 100',
        goodIndicators: 'Summarizes research in simple terms; avoids jargon; provides short, digestible takeaways.',
        sampleDialogue: '"To put it simply, this treatment targets inflammation without suppressing your patient\'s immune system."'
      },
      {
        id: 'objection',
        title: 'Objection Handling',
        score: '85%',
        icon: 'ðŸ›¡ï¸',
        color: '#ef4444', // red-500
        bgColor: 'from-red-50 to-white',
        borderColor: 'border-red-200',
        definition: 'Reflects skill in acknowledging and resolving HCP concerns.',
        calculation: '(Successful objection resolutions / Total objections) Ã— 100',
        goodIndicators: 'Listens carefully; reframes objections constructively; offers evidence-based answers.',
        sampleDialogue: '"Doctor, I noticed you hesitated on that pointâ€”would it help if I shared more specifics from the clinical trial?"'
      },
      {
        id: 'discovery',
        title: 'Discovery Index',
        score: '78%',
        icon: 'ðŸ”',
        color: '#a855f7', // purple-500
        bgColor: 'from-purple-50 to-white',
        borderColor: 'border-purple-200',
        definition: 'Scores effectiveness in uncovering HCP needs and priorities.',
        calculation: '(Probing questions / Opportunities to discover) Ã— 100',
        goodIndicators: 'Uses open-ended questions; clarifies patient challenges; asks for details on prescribing habits.',
        sampleDialogue: '"Could you tell me what factors are most important to you when selecting a treatment for this condition?"'
      },
      {
        id: 'listening',
        title: 'Active Listening',
        score: '90%',
        icon: 'ðŸ‘‚',
        color: '#ec4899', // pink-500
        bgColor: 'from-pink-50 to-white',
        borderColor: 'border-pink-200',
        definition: 'Assesses attentiveness and ability to confirm and respond to HCP points.',
        calculation: '(Active listening behaviors / Total exchanges) Ã— 100',
        goodIndicators: 'Paraphrases HCP statements; checks for clarity; reacts to both words and emotions.',
        sampleDialogue: '"So you\'re seeing these side effects mostly in younger patients, is that right?"'
      },
      {
        id: 'adaptability',
        title: 'Emotional Adaptability',
        score: '83%',
        icon: 'ðŸ”„',
        color: '#6366f1', // indigo-500
        bgColor: 'from-indigo-50 to-white',
        borderColor: 'border-indigo-200',
        definition: 'Measures ability to flex communication style based on HCP attitude and energy.',
        calculation: '(Adaptive responses / Opportunities to adapt) Ã— 100',
        goodIndicators: 'Changes pace when needed; softens tone under stress; expresses flexibility.',
        sampleDialogue: '"I can tell you\'re busy, so I\'ll keep this brief and focus on what matters most to your practice."'
      }
    ];

    // Generate cards
    function generateMetricCards() {
      const grid = document.getElementById('metricCardsGrid');
      if (!grid) return;

      metricsData.forEach((metric, index) => {
        const card = document.createElement('div');
        // Match original dark navy card style from screenshot
        card.className = `metric-card bg-[#1e3a5f]/80 backdrop-blur-sm p-4 rounded-xl shadow-lg border border-white/10 hover:shadow-2xl hover:border-accent-teal/60 transition-all duration-300 cursor-pointer transform hover:scale-105 opacity-0 text-center`;
        card.style.animation = `fadeInUp 0.5s ease-out ${index * 0.15}s forwards`;
        card.setAttribute('data-metric-id', metric.id);

        card.innerHTML = `
          <div class="flex flex-col items-center justify-center h-full">
            <div class="text-2xl font-bold text-accent-teal mb-2">${metric.score}</div>
            <p class="text-sm font-semibold uppercase text-indigo-100">${metric.title}</p>
          </div>
        `;

        card.addEventListener('click', () => openMetricModal(metric));
        grid.appendChild(card);
      });
    }

    // Open modal with metric details
    function openMetricModal(metric) {
      const modal = document.getElementById('metricModal');
      const content = document.getElementById('metricModalContent');

      content.innerHTML = `
        <div class="sticky top-0 bg-gradient-to-r from-[#0f2747] to-[#1e3a5f] text-white p-6 rounded-t-2xl flex justify-between items-center">
          <div class="flex items-center gap-4">
            <span class="text-4xl">${metric.icon}</span>
            <div>
              <h2 class="text-2xl font-bold">${metric.title}</h2>
              <div class="inline-block px-3 py-1 rounded-full text-sm font-semibold mt-1" style="background-color: rgba(255,255,255,0.2)">
                ${metric.score}
              </div>
            </div>
          </div>
          <button onclick="closeMetricModal()" class="text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </button>
        </div>

        <div class="p-8 space-y-6">
          <div>
            <h3 class="text-lg font-bold text-gray-900 mb-2 flex items-center gap-2">
              <span class="w-2 h-2 rounded-full" style="background-color: ${metric.color}"></span>
              Definition
            </h3>
            <p class="text-gray-700 leading-relaxed">${metric.definition}</p>
          </div>

          <div>
            <h3 class="text-lg font-bold text-gray-900 mb-2 flex items-center gap-2">
              <span class="w-2 h-2 rounded-full" style="background-color: ${metric.color}"></span>
              Calculation
            </h3>
            <p class="text-gray-700 leading-relaxed font-mono text-sm bg-gray-50 p-3 rounded-lg">${metric.calculation}</p>
          </div>

          <div>
            <h3 class="text-lg font-bold text-gray-900 mb-2 flex items-center gap-2">
              <span class="w-2 h-2 rounded-full" style="background-color: ${metric.color}"></span>
              Good Indicators
            </h3>
            <p class="text-gray-700 leading-relaxed">${metric.goodIndicators}</p>
          </div>

          <div class="bg-gradient-to-br ${metric.bgColor} p-6 rounded-xl border-2 ${metric.borderColor}">
            <h3 class="text-lg font-bold text-gray-900 mb-3 flex items-center gap-2">
              <span class="w-2 h-2 rounded-full" style="background-color: ${metric.color}"></span>
              Sample Sales Dialogue
            </h3>
            <p class="text-gray-800 italic leading-relaxed text-lg">${metric.sampleDialogue}</p>
          </div>
        </div>
      `;

      modal.classList.remove('hidden');
      modal.classList.add('flex');
      setTimeout(() => {
        content.classList.remove('scale-95', 'opacity-0');
        content.classList.add('scale-100', 'opacity-100');
      }, 10);
    }

    // Close modal
    function closeMetricModal() {
      const modal = document.getElementById('metricModal');
      const content = document.getElementById('metricModalContent');

      content.classList.add('scale-95', 'opacity-0');
      content.classList.remove('scale-100', 'opacity-100');

      setTimeout(() => {
        modal.classList.add('hidden');
        modal.classList.remove('flex');
      }, 300);
    }

    // Click outside modal to close
    document.getElementById('metricModal')?.addEventListener('click', (e) => {
      if (e.target.id === 'metricModal') {
        closeMetricModal();
      }
    });

    // Generate cards on page load
    document.addEventListener('DOMContentLoaded', generateMetricCards);
  </script>

  <style>
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .metric-card {
      position: relative;
      overflow: hidden;
    }

    .metric-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      transition: left 0.5s;
    }

    .metric-card:hover::before {
      left: 100%;
    }
  </style>

  <!-- END: Platform Modules Section -->

  <!-- BEGIN: EI Coaching Section -->
  <section id="ei-coaching" class="py-16 md:py-24 bg-gray-50 border-t border-gray-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-4xl font-extrabold text-gray-900 mb-4">EI-Driven Coaching</h2>
        <div class="w-20 mx-auto section-separator"></div>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto">
          The ReflectivAI Coach evaluates every exchange through an emotional intelligence lens, measuring not just what
          reps say, but how effectively they connect, listen, and adapt.
        </p>
      </div>

      <div class="grid md:grid-cols-2 gap-12 items-center mb-12">
        <div>
          <h3 class="text-2xl font-bold text-gray-900 mb-4">How the Coach Works</h3>
          <p class="text-gray-700 mb-4">
            Every conversation flows through a real-time EI engine that scores performance across ten critical
            dimensions: <strong>Accuracy, Empathy, Clarity, Compliance, Discovery, Objection Handling, Active Listening,
              Emotional Adaptability, Confidence, and Rapport</strong>. The moment you hit "Send," the system evaluates
            clinical precision, emotional resonance, regulatory alignment, and conversational strategyâ€”assigning each
            dimension a score out of 10 and mapping it to a color-coded coaching signal.
          </p>
          <p class="text-gray-700 mb-4">
            These scores appear as live coaching cards in the <strong>Coach Feedback panel</strong>. Each card pairs a
            metric name, a numeric score, a gradient-coded visual indicator, and a detailed coaching note that explains
            why the score landed where it didâ€”and exactly what to adjust to improve it. For example, if Clarity scores
            6.8/10, the card might highlight a confusing phrase and suggest more patient-friendly phrasing; if
            Compliance flags 4.2/10, it will cite the specific label constraint you crossed and offer corrective
            language.
          </p>
          <p class="text-gray-700 mb-4">
            This isnâ€™t generic feedback. Every coaching moment ties back to emotional intelligence principles, teaching
            reps to regulate tone under pressure, listen for emotional cues, and respond with authentic empathyâ€”all
            while staying compliant.
          </p>
        </div>
        <div class="bg-white p-8 rounded-xl shadow-lg border border-gray-200">
          <h4 class="text-lg font-bold text-gray-900 mb-4 text-center">EI in Practice</h4>
          <ul class="space-y-4">
            <li class="flex items-start">
              <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3 flex-shrink-0">
                <svg class="h-5 w-5 text-primary-dark" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
              </div>
              <div>
                <h5 class="font-bold text-gray-900">Regulate Tone Under Pressure</h5>
                <p class="text-sm text-gray-600">Learn to stay calm and confident when HCPs push back or challenge your
                  message.</p>
              </div>
            </li>
            <li class="flex items-start">
              <div class="w-10 h-10 bg-teal-100 rounded-lg flex items-center justify-center mr-3 flex-shrink-0">
                <svg class="h-5 w-5 text-accent-teal" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z">
                  </path>
                </svg>
              </div>
              <div>
                <h5 class="font-bold text-gray-900">Listen for Emotional Cues</h5>
                <p class="text-sm text-gray-600">Detect hesitation, skepticism, or interest in HCP responses and adjust
                  your approach.</p>
              </div>
            </li>
            <li class="flex items-start">
              <div class="w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center mr-3 flex-shrink-0">
                <svg class="h-5 w-5 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z">
                  </path>
                </svg>
              </div>
              <div>
                <h5 class="font-bold text-gray-900">Respond with Label-Aligned Empathy</h5>
                <p class="text-sm text-gray-600">Show you understand HCP concerns while guiding back to approved,
                  compliant messaging.</p>
              </div>
            </li>
          </ul>
        </div>
      </div>

      <div class="p-8 rounded-xl border border-transparent" style="background-color:#0f2747;">
        <h3 class="text-xl font-bold text-white mb-3 text-center">
          Real-Time, Actionable Coaching
        </h3>
        <p class="text-center max-w-3xl mx-auto text-indigo-100">
          The Coach doesnâ€™t just score youâ€”it teaches you. With every simulation, reps build
          muscle memory for emotionally intelligent conversations that drive trust, adherence,
          and long-term HCP relationships.
        </p>
      </div>

    </div>
  </section>
  <!-- END: EI Coaching Section -->

  <!-- BEGIN: Performance Analytics Section with 10 Clickable Metric Cards -->
  <section id="analytics" class="py-16 md:py-24 text-white" style="background-color:#0f2747;">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-4xl font-extrabold mb-4">Performance Analytics & Coaching Intelligence</h2>
        <div class="w-20 mx-auto section-separator" style="background-color:white"></div>
        <p class="text-xl text-indigo-200 max-w-3xl mx-auto">Turn training data into measurable business outcomes with
          EI-driven metrics.</p>
        <div class="mt-6">
          <a href="analytics.html" target="_blank"
            class="inline-flex items-center px-6 py-3 rounded-full bg-accent-teal text-white font-semibold hover:bg-teal-600 transition shadow-lg">
            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z">
              </path>
            </svg>
            Export Sample Analytics Report (PDF)
          </a>
        </div>
      </div>

      <!-- 10 Clickable EI Metric Cards (2 rows of 5) -->
      <div id="metricCardsGrid" class="grid grid-cols-2 md:grid-cols-5 gap-6 max-w-6xl mx-auto">
        <!-- Cards will be dynamically generated by JavaScript below -->
      </div>
    </div>
  </section>
  <!-- END: Performance Analytics Section -->

  <!-- ===== Therapeutic Areas & Personas ===== -->
  <section id="therapeutic-areas" class="py-16 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 grid md:grid-cols-2 gap-12">
      <!-- Areas -->
      <div class="text-center md:text-left">
        <h3 class="text-3xl font-bold text-gray-900 mb-3">Train by Therapeutic Area</h3>
        <div class="w-20 mx-auto md:mx-0 h-1 rounded" style="background-color:#20bfa9;"></div>
        <div class="mt-6 flex flex-wrap gap-3 md:gap-4 justify-center md:justify-start">
          <button type="button"
            class="inline-flex h-10 items-center px-5 rounded-full border-2 border-[#0f2747] bg-white text-[#0f2747] text-sm font-semibold hover:bg-[#0f2747] hover:text-white transition"
            data-title="Oncology" data-challenge="Complex regimens, strict rules"
            data-objective="Clarify label-compliant points" data-goal="Confident, accurate dialogue">Oncology</button>
          <button type="button"
            class="inline-flex h-10 items-center px-5 rounded-full border-2 border-[#0f2747] bg-white text-[#0f2747] text-sm font-semibold hover:bg-[#0f2747] hover:text-white transition"
            data-title="Vaccines" data-challenge="Hesitancy, timing windows" data-objective="Address key objections"
            data-goal="Improve uptake intent">Vaccines</button>
          <button type="button"
            class="inline-flex h-10 items-center px-5 rounded-full border-2 border-[#0f2747] bg-white text-[#0f2747] text-sm font-semibold hover:bg-[#0f2747] hover:text-white transition"
            data-title="HIV PrEP" data-challenge="Stigma, adherence gaps" data-objective="Navigate eligibility safely"
            data-goal="Drive appropriate starts">HIV PrEP</button>
          <button type="button"
            class="inline-flex h-10 items-center px-5 rounded-full border-2 border-[#0f2747] bg-white text-[#0f2747] text-sm font-semibold hover:bg-[#0f2747] hover:text-white transition"
            data-title="Cardiology" data-challenge="Risk tradeoffs, polypharm" data-objective="Align on risk reduction"
            data-goal="Guideline-consistent choices">Cardiology</button>
          <button type="button"
            class="inline-flex h-10 items-center px-5 rounded-full border-2 border-[#0f2747] bg-white text-[#0f2747] text-sm font-semibold hover:bg-[#0f2747] hover:text-white transition"
            data-title="Pulmonology" data-challenge="Variable control, access" data-objective="Clarify step-up criteria"
            data-goal="Better control outcomes">Pulmonology</button>
          <button type="button"
            class="inline-flex h-10 items-center px-5 rounded-full border-2 border-[#0f2747] bg-white text-[#0f2747] text-sm font-semibold hover:bg-[#0f2747] hover:text-white transition"
            data-title="Hepatitis B" data-challenge="Chronic course, stigma" data-objective="Reinforce monitoring plan"
            data-goal="Sustained engagement">Hepatitis B</button>
          <button type="button"
            class="inline-flex h-10 items-center px-5 rounded-full border-2 border-gray-400 bg-gray-100 text-gray-800 text-sm font-semibold hover:bg-gray-200 transition"
            data-title="Custom Scenarios" data-challenge="Org-specific objections" data-objective="Map to your playbook"
            data-goal="Faster rep readiness">+ Custom Scenarios</button>
        </div>
      </div>

      <!-- Personas -->
      <div class="text-center md:text-left">
        <h3 class="text-3xl font-bold text-gray-900 mb-3">Practice with Realistic Personas</h3>
        <div class="w-20 mx-auto md:mx-0 h-1 rounded" style="background-color:#20bfa9;"></div>
        <div class="mt-6 flex flex-wrap gap-3 md:gap-4 justify-center md:justify-start">
          <button type="button"
            class="inline-flex h-10 items-center px-5 rounded-full border-2 border-[#0f2747] bg-white text-[#0f2747] text-sm font-semibold hover:bg-[#0f2747] hover:text-white transition"
            data-title="Internal Medicine MD" data-challenge="Time pressure, breadth"
            data-objective="Be concise, relevant" data-goal="Earn next minute">Internal Medicine MD</button>
          <button type="button"
            class="inline-flex h-10 items-center px-5 rounded-full border-2 border-[#0f2747] bg-white text-[#0f2747] text-sm font-semibold hover:bg-[#0f2747] hover:text-white transition"
            data-title="Oncologist" data-challenge="Evidence depth, safety" data-objective="Lead with outcomes"
            data-goal="Advance informed choice">Oncologist</button>
          <button type="button"
            class="inline-flex h-10 items-center px-5 rounded-full border-2 border-[#0f2747] bg-white text-[#0f2747] text-sm font-semibold hover:bg-[#0f2747] hover:text-white transition"
            data-title="Nurse Practitioner (NP)" data-challenge="Workflow, access paths"
            data-objective="Simplify next steps" data-goal="Smooth initiation">Nurse Practitioner (NP)</button>
          <button type="button"
            class="inline-flex h-10 items-center px-5 rounded-full border-2 border-[#0f2747] bg-white text-[#0f2747] text-sm font-semibold hover:bg-[#0f2747] hover:text-white transition"
            data-title="Infectious Disease Specialist" data-challenge="Resistance, guidelines"
            data-objective="Anchor to evidence" data-goal="Appropriate selection">Infectious Disease Specialist</button>
          <button type="button"
            class="inline-flex h-10 items-center px-5 rounded-full border-2 border-[#0f2747] bg-white text-[#0f2747] text-sm font-semibold hover:bg-[#0f2747] hover:text-white transition"
            data-title="Cardiologist" data-challenge="Risk-benefit nuance" data-objective="Quantify absolute risk"
            data-goal="Shared decisions">Cardiologist</button>
          <button type="button"
            class="inline-flex h-10 items-center px-5 rounded-full border-2 border-[#0f2747] bg-white text-[#0f2747] text-sm font-semibold hover:bg-[#0f2747] hover:text-white transition"
            data-title="Physician Assistant (PA)" data-challenge="Protocol adherence"
            data-objective="Clarify guardrails" data-goal="Safe, quick actions">Physician Assistant (PA)</button>
        </div>
      </div>
    </div>

    <!-- Reusable pill modal -->
    <div id="pill-modal" class="modal" aria-hidden="true">
      <div class="modal-box" role="dialog" aria-modal="true" aria-labelledby="pillTitle">
        <div class="modal-head">
          <div id="pillTitle" class="modal-title">Details</div>
          <button class="modal-close" data-close="#pill-modal" aria-label="Close">Close</button>
        </div>
        <div class="px-6 py-5">
          <ul class="space-y-3 text-sm text-gray-800">
            <li><span class="font-semibold text-[#0f2747]">Challenge:</span> <span id="pill-challenge">â€”</span></li>
            <li><span class="font-semibold text-[#0f2747]">Objective:</span> <span id="pill-objective">â€”</span></li>
            <li><span class="font-semibold text-[#0f2747]">Goal:</span> <span id="pill-goal">â€”</span></li>
          </ul>
        </div>
        <div class="px-6 py-4 border-t border-gray-200 text-right">
          <button
            class="inline-flex h-10 items-center px-5 rounded-full bg-[#0f2747] text-white text-sm font-semibold hover:opacity-90 transition modal-close"
            data-close="#pill-modal">OK</button>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== Ethics ===== -->
  <section id="ethics" class="py-16 md:py-24 bg-gray-50 border-t border-gray-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-4xl font-extrabold text-gray-900 mb-4">Ethics, Privacy &amp; Governance</h2>
        <div class="w-20 mx-auto section-separator"></div>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto">
          Compliance and responsible AI built for the rigors of life-sciences training.
        </p>
      </div>

      <div class="grid md:grid-cols-2 gap-6">

        <!-- Data Privacy & Security -->
        <div class="bg-white p-6 rounded-xl shadow-lg border-t-4" style="border-color:#20bfa9">
          <h4 class="text-xl font-bold text-gray-900 mb-2 flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-accent-teal mr-2" viewBox="0 0 24 24"
              fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
              <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
            </svg>
            Data Privacy &amp; Security
          </h4>
          <p class="text-gray-600 text-sm">
            PHI is off by default; when enabled, BAA, encryption, and RBAC apply.
          </p>
        </div>

        <!-- Algorithmic Bias & Fairness -->
        <div class="bg-white p-6 rounded-xl shadow-lg border-t-4" style="border-color:#20bfa9">
          <h4 class="text-xl font-bold text-gray-900 mb-2 flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-accent-teal mr-2" viewBox="0 0 24 24"
              fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="M12 6v6l4 2"></path>
            </svg>
            Algorithmic Bias &amp; Fairness
          </h4>
          <p class="text-gray-600 text-sm">
            Pre-deployment bias testing with monitoring and remediation steps.
          </p>
        </div>

        <!-- Transparency & Explainability -->
        <div class="bg-white p-6 rounded-xl shadow-lg border-t-4" style="border-color:#20bfa9">
          <h4 class="text-xl font-bold text-gray-900 mb-2 flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-accent-teal mr-2" viewBox="0 0 24 24"
              fill="none" stroke="currentColor" stroke-width="2">
              <line x1="12" y1="1" x2="12" y2="23"></line>
              <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
            </svg>
            Transparency &amp; Explainability
          </h4>
          <p class="text-gray-600 text-sm">
            Reason codes in-product; model cards document limits and cadence.
          </p>
        </div>

        <!-- Human Oversight & Accountability -->
        <div class="bg-white p-6 rounded-xl shadow-lg border-t-4" style="border-color:#20bfa9">
          <h4 class="text-xl font-bold text-gray-900 mb-2 flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-accent-teal mr-2" viewBox="0 0 24 24"
              fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 9l6-6M20 6l-6 6M10 20l-6-6M4 14l6 6"></path>
            </svg>
            Human Oversight &amp; Accountability
          </h4>
          <p class="text-gray-600 text-sm">
            Curated scenarios; MLR versioning for full traceability.
          </p>
        </div>

      </div>
    </div>
  </section>

  <!-- ===== Contact ===== -->
  <section id="contact" class="py-16 md:py-24 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 grid md:grid-cols-2 gap-12 items-start">
      <div class="grid-mobile-center">
        <h2 class="text-4xl font-extrabold text-gray-900 mb-4">Let's Redefine Your Sales Training</h2>
        <div class="section-separator mx-auto md:mx-0"></div>
        <p class="text-xl text-gray-600 mb-8">Ready to see how adaptive AI coaching can drive confidence and compliance
          for your team? Request a personalized demonstration.</p>
        <div class="space-y-4 text-center md:text-left">
          <p class="flex items-center justify-center md:justify-start text-gray-700">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-primary-dark mr-3" viewBox="0 0 24 24"
              fill="none" stroke="currentColor" stroke-width="2">
              <path
                d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z">
              </path>
            </svg>
            (555) 123-4567
          </p>
          <p class="flex items-center justify-center md:justify-start text-gray-700">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-primary-dark mr-3" viewBox="0 0 24 24"
              fill="none" stroke="currentColor" stroke-width="2">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
              <polyline points="22,6 12,13 2,6"></polyline>
            </svg>
            demo@reflectivai.com
          </p>
        </div>
      </div>

      <form class="bg-white p-8 rounded-xl shadow-2xl border border-gray-100 w-full"
        action="https://formspree.io/f/reflectiv-demo" method="POST">
        <div class="space-y-6">
          <div>
            <label for="name" class="block text-sm font-medium text-gray-700 mb-1">Name</label>
            <input type="text" id="name" name="name" required
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-accent-teal focus:border-accent-teal transition">
          </div>
          <div>
            <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
            <input type="email" id="email" name="_replyto" required
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-accent-teal focus:border-accent-teal transition">
          </div>
          <div>
            <label for="message" class="block text-sm font-medium text-gray-700 mb-1">Message</label>
            <textarea id="message" name="message" rows="4"
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-accent-teal focus:border-accent-teal transition"></textarea>
          </div>
          <input type="hidden" name="_subject" value="ReflectivAI Demo Request">
          <button type="submit"
            class="w-full px-8 py-3 rounded-full primary-dark text-white font-bold shadow-xl hover:bg-indigo-900 transition transform hover:scale-[1.01]">
            Request Demo
          </button>
        </div>
      </form>
    </div>
  </section>

  <!-- ===== Footer ===== -->
  <footer class="py-8 bg-gray-800 text-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-sm">
      <p>Â© 2025 ReflectivAI. All rights reserved.</p>
    </div>
  </footer>

  <!-- ===== Card Modal kept (info cards) ===== -->
  <div id="cardModal" class="modal" aria-hidden="true">
    <div class="modal-box" role="dialog" aria-modal="true" aria-labelledby="cardTitle">
      <div class="modal-head">
        <div id="cardTitle" class="modal-title">Details</div>
        <button class="modal-close" data-close="#cardModal" aria-label="Close">Close</button>
      </div>
      <div id="cardBody" style="padding:14px"></div>
    </div>
  </div>

  <!-- ===== Coach Modal ===== -->
  <div id="coachModal" class="modal" aria-hidden="true">
    <div class="modal-box" role="dialog" aria-modal="true" aria-labelledby="coachTitle">
      <div class="modal-head">
        <div id="coachTitle" class="modal-title">Reflectiv Coach</div>
        <button class="modal-close" data-close="#coachModal" aria-label="Close">Close</button>
      </div>
      <div id="coachBody">
        <div id="reflectiv-widget" class="reflectiv-widget"><noscript>You need JavaScript to use the ReflectivAI
            Coach.</noscript></div>
      </div>
    </div>
  </div>

  <!-- ===== Alora FAB + panel ===== -->
  <button id="aloraFab" aria-label="Open Alora chat" title="Open Alora">
    <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
      <path fill="#fff" d="M3 5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H9.4L5 19.9V16H5a2 2 0 0 1-2-2V5z" />
    </svg>
  </button>
  <div id="alora" class="alora" aria-live="polite" aria-hidden="true">
    <div class="alora-head">
      <div class="alora-title">Alora â€” ReflectivAI Help</div><button id="aloraClose" class="alora-close"
        aria-label="Close Alora chat" title="Close">Ã—</button>
    </div>
    <div id="aloraBody" class="alora-body"></div>
    <form id="aloraForm" class="alora-input" autocomplete="off" aria-label="Alora chat input">
      <input id="aloraInput" placeholder="Ask about ReflectivAIâ€¦" aria-label="Type your message">
      <button class="btn primary" type="submit">Send</button>
    </form>
  </div>

  <!-- ===== Bootstrap JS for modals, pills, coach trigger, Alora persona v4 ===== -->
  <script>
    (function () {
      const onReady = (fn) => { document.readyState !== 'loading' ? fn() : document.addEventListener('DOMContentLoaded', fn, { once: true }); };
      onReady(() => {

        /* ---------- Generic modal controls ---------- */
        function openModal(sel) {
          const el = document.querySelector(sel);
          if (!el) return;
          el.classList.add('open');
          el.setAttribute('aria-hidden', 'false');

          // Reset coach modal position on each open so it recenters
          if (sel === '#coachModal') {
            const box = el.querySelector('.modal-box');
            if (box) {
              box.style.position = '';
              box.style.margin = '';
              box.style.top = '';
              box.style.left = '';
              box.style.transform = '';
            }
          }
        }
        function closeModal(sel) {
          const el = document.querySelector(sel);
          if (el) {
            el.classList.remove('open');
            el.setAttribute('aria-hidden', 'true');
          }
        }
        window.openModal = openModal; // expose for About EI link

        document.querySelectorAll('.modal-close').forEach(b =>
          b.addEventListener('click', () => closeModal(b.getAttribute('data-close')))
        );
        document.querySelectorAll('.modal').forEach(m =>
          m.addEventListener('click', e => { if (e.target === m) closeModal('#' + m.id) })
        );
        document.addEventListener('keydown', e => {
          if (e.key === 'Escape')
            document.querySelectorAll('.modal.open').forEach(m => closeModal('#' + m.id));
        });

        /* ---------- Coach modal drag (mouse) ---------- */
        (function () {
          const coachModal = document.getElementById('coachModal');
          if (!coachModal) return;
          const box = coachModal.querySelector('.modal-box');
          const head = coachModal.querySelector('.modal-head');
          if (!box || !head) return;

          let dragging = false, offsetX = 0, offsetY = 0;

          function moveAt(clientX, clientY) {
            const padding = 12;
            const w = box.offsetWidth;
            const h = box.offsetHeight;
            let x = clientX - offsetX;
            let y = clientY - offsetY;
            const maxX = window.innerWidth - padding - w;
            const maxY = window.innerHeight - padding - h;
            if (x < padding) x = padding;
            if (y < padding) y = padding;
            if (x > maxX) x = maxX;
            if (y > maxY) y = maxY;
            box.style.left = x + 'px';
            box.style.top = y + 'px';
          }

          function onMouseMove(e) {
            if (!dragging) return;
            moveAt(e.clientX, e.clientY);
          }

          function onMouseUp() {
            dragging = false;
            document.removeEventListener('mousemove', onMouseMove);
            document.removeEventListener('mouseup', onMouseUp);
          }

          function onMouseDown(e) {
            if (e.button !== 0) return;
            // Don't start drag from the Close button
            if (e.target.closest('.modal-close')) return;

            dragging = true;
            const rect = box.getBoundingClientRect();
            offsetX = e.clientX - rect.left;
            offsetY = e.clientY - rect.top;

            box.style.position = 'absolute';
            box.style.margin = '0';
            box.style.transform = 'none';

            moveAt(e.clientX, e.clientY);
            document.addEventListener('mousemove', onMouseMove);
            document.addEventListener('mouseup', onMouseUp);
          }

          head.addEventListener('mousedown', onMouseDown);
        })();

        /* ---------- Coach trigger ---------- */
        document.getElementById('openCoach')?.addEventListener('click', e => {
          e.preventDefault();
          openModal('#coachModal');
        });

        /* ---------- Pill modal wiring ---------- */
        (function () {
          const scope = document.getElementById('therapeutic-areas');
          if (!scope) return;
          const modal = '#pill-modal';
          scope.querySelectorAll('button[data-title]').forEach(btn => {
            btn.addEventListener('click', () => {
              document.getElementById('pillTitle').textContent = btn.dataset.title || '';
              document.getElementById('pill-challenge').textContent = btn.dataset.challenge || '';
              document.getElementById('pill-objective').textContent = btn.dataset.objective || '';
              document.getElementById('pill-goal').textContent = btn.dataset.goal || '';
              openModal(modal);
            });
          });
        })();

        /* ---------- Alora wiring (remote-first, DOM context, low hard-code) ---------- */
        const aloraFab = document.getElementById('aloraFab');
        const alora = document.getElementById('alora');
        const aloraClose = document.getElementById('aloraClose');
        const aloraBody = document.getElementById('aloraBody');
        const aloraForm = document.getElementById('aloraForm');
        const aloraInput = document.getElementById('aloraInput');

        function bot(t) { const d = document.createElement('div'); d.className = 'alora-msg bot'; d.textContent = t; aloraBody.appendChild(d); aloraBody.scrollTop = aloraBody.scrollHeight }
        function user(t) { const d = document.createElement('div'); d.className = 'alora-msg user'; d.textContent = t; aloraBody.appendChild(d); aloraBody.scrollTop = aloraBody.scrollHeight }
        function typing(show) { if (show) { const t = document.createElement('div'); t.className = 'alora-typing'; t.id = 'aloraTyping'; let i = 0; t.textContent = 'Alora is typing'; aloraBody.appendChild(t); t._timer = setInterval(() => { i = (i + 1) % 4; t.textContent = 'Alora is typing' + '.'.repeat(i) }, 300); aloraBody.scrollTop = aloraBody.scrollHeight } else { const t = document.getElementById('aloraTyping'); if (t) { clearInterval(t._timer); t.remove() } } }

        function scrollToId(id) {
          const el = document.getElementById(id) || document.querySelector(`[data-anchor='${id}']`) || document.querySelector(`[href='#${id}']`);
          if (el) { el.scrollIntoView({ behavior: 'smooth', block: 'start' }); return true }
          return false;
        }

        const ACTIONS = {
          'open-coach': () => openModal('#coachModal'),
          'request-demo': () => scrollToId('contact'),
          'see-platform': () => scrollToId('platform'),
          'see-analytics': () => scrollToId('analytics'),
          'see-ei': () => scrollToId('why-it-matters'),
          'see-personas': () => scrollToId('therapeutic-areas')
        };

        const CHIPS_BASE = [['Open Coach', 'open-coach'], ['Request Demo', 'request-demo'], ['See Personas', 'see-personas'], ['Why EI', 'see-ei']];

        function renderChips(pairs) {
          let wrap = aloraBody.querySelector('.alora-suggest');
          if (!wrap) { wrap = document.createElement('div'); wrap.className = 'alora-suggest'; aloraBody.appendChild(wrap) }
          wrap.innerHTML = '';
          (pairs || []).forEach(([label, cmd]) => {
            const b = document.createElement('button');
            b.type = 'button'; b.className = 'alora-chip'; b.textContent = label;
            b.onclick = () => ACTIONS[cmd]?.();
            wrap.appendChild(b);
          });
        }

        /* ------------ Live site knowledge harvest ------------ */
        function textOf(sel) {
          const el = document.querySelector(sel); if (!el) return "";
          return (el.innerText || "").replace(/\s+/g, ' ').trim();
        }
        function sectionDump(id, label) {
          const el = document.getElementById(id); if (!el) return "";
          const head = el.querySelector('h1,h2,h3,h4');
          const txt = (el.innerText || "").replace(/\s+/g, ' ').trim();
          return `[SECTION ${label || ('#' + id)}] ${head ? head.innerText + ' â€” ' : ''}${txt}`.slice(0, 4000);
        }
        function harvestSiteContext() {
          const parts = [];
          parts.push(`[TITLE] ${document.title || ''}`);
          parts.push(`[BRAND] ${textOf('header .brand')}`);
          parts.push(sectionDump('platform', 'Platform'));
          parts.push(sectionDump('analytics', 'Analytics'));
          parts.push(sectionDump('therapeutic-areas', 'Therapeutic Areas & Personas'));
          parts.push(sectionDump('why-it-matters', 'Why EI'));
          parts.push(sectionDump('ethics', 'Ethics/Privacy/Governance'));
          parts.push(sectionDump('contact', 'Contact'));
          const w = document.getElementById('reflectiv-widget');
          if (w) {
            parts.push('[COACH UI] Modes: Product Knowledge, Sales Coach, Role Play, Emotional Assessment.');
            parts.push('[COACH UI] Sales Coach shows Focus/Strategy; Role Play supports "Evaluate this exchange".');
          }
          return parts.filter(Boolean).join('\n').slice(0, 24000);
        }

        /* ------------ Remote call with persona + DOM context ------------ */
        async function askRemote(q) {
          const body = {
            role: 'alora',
            site: 'reflectivai',
            persona: (window.ALORA_PERSONA && window.ALORA_PERSONA.system) || '',
            site_context: harvestSiteContext(),
            message: q
          };
          const doFetch = async (timeoutMs) => {
            const ctl = new AbortController(); const t = setTimeout(() => ctl.abort('timeout'), timeoutMs);
            try {
              const r = await fetch((window.ALORA_ENDPOINT || ''), {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(body),
                signal: ctl.signal
              });
              clearTimeout(t);
              if (!r.ok) { if (r.status >= 500) throw new Error('server'); return null; }
              const j = await r.json().catch(() => null);
              return j && j.reply || null;
            } catch (e) { clearTimeout(t); throw e; }
          };
          try { return await doFetch(45000); }
          catch (e) { try { await new Promise(res => setTimeout(res, 600)); return await doFetch(45000); } catch (_) { return null; } }
        }

        /* ------------ Minimal local routing fallback (no hard copy) ------------ */
        function localRoute(q) {
          const s = String(q || '').toLowerCase();

          if (/^(hi|hello|hey)\b/.test(s))
            return {
              text: "Hi, Iâ€™m Alora. Ask about the platform, Emotional Intelligence, simulations, analytics, or how the Coach works.",
              chips: CHIPS_BASE
            };

          if (/\b(pricing|price|cost)\b/.test(s))
            return {
              text: "Pricing details are shared during a brief demo with our partnerships team.",
              chips: [['Request Demo', 'request-demo']]
            };

          if (/\b(analytics|dashboard|metrics|report|insight|data)\b/.test(s))
            return {
              text: "ReflectivAIâ€™s analytics include Accuracy Index, Readiness Velocity, Empathy Index, Compliance Guardrails, and Confidence Deltaâ€”turning behavioral data into performance insight.",
              action: 'see-analytics',
              chips: [['See Analytics', 'see-analytics'], ['Request Demo', 'request-demo']]
            };

          if (/\b(emotional intelligence|ei|empathy|tone|listening|self-awareness)\b/.test(s))
            return {
              text: "ReflectivAIâ€™s EI framework measures empathy, listening, tone, and clarityâ€”coaching reps to build trust and confidence with HCPs. Explore Why EI to learn more.",
              action: 'see-ei',
              chips: [['Why EI', 'see-ei'], ['Open Coach', 'open-coach']]
            };

          if (/\b(platform|modules?|features?|tools?)\b/.test(s))
            return {
              text: "The ReflectivAI platform blends Product Knowledge, Sales Coach, Role Play, and Relationship Intelligence modulesâ€”all designed for life-sciences compliance and coaching.",
              action: 'see-platform',
              chips: [['See Platform', 'see-platform'], ['Open Coach', 'open-coach']]
            };

          if (/\b(personas?|hcp|roleplay|scenarios?)\b/.test(s))
            return {
              text: "You can practice with realistic HCP personas by specialtyâ€”Oncologists, NPs, PAs, and moreâ€”across disease states like Oncology, Cardiology, and Vaccines.",
              action: 'see-personas',
              chips: [['See Personas', 'see-personas'], ['Try Simulation', 'open-coach']]
            };

          if (/\b(coach|simulation|simulator|practice|training)\b/.test(s))
            return {
              text: "Opening the AI Coach. Choose Product Knowledge, Sales Coach, or Role Play to start interactive training.",
              action: 'open-coach',
              chips: CHIPS_BASE
            };

          return null;
        }

        /* ------------ Open/close ------------ */
        function aloraOpen() {
          alora.classList.add('open'); alora.setAttribute('aria-hidden', 'false');
          if (!aloraBody.dataset.greeted) {
            bot("Hi, Iâ€™m Alora. I can explain features, EI, simulations, analytics, and usage. Ask a question.");
            renderChips([['Open Coach', 'open-coach'], ['See Platform', 'see-platform'], ['Why EI', 'see-ei'], ['Request Demo', 'request-demo']]);
            aloraBody.dataset.greeted = '1';
          }
        }
        function aloraHide() { alora.classList.remove('open'); alora.setAttribute('aria-hidden', 'true') }
        aloraFab.addEventListener('click', aloraOpen);
        aloraClose.addEventListener('click', aloraHide);

        /* ------------ Submit: remote-first, retry, deterministic fallback ------------ */
        aloraForm.addEventListener('submit', async e => {
          e.preventDefault();
          const q = (aloraInput.value || '').trim(); if (!q) return;
          aloraInput.value = ''; user(q); typing(true);

          let resp = await askRemote(q).catch(() => null);
          typing(false);

          if (resp) { bot(resp); renderChips(CHIPS_BASE); return; }

          const local = localRoute(q);
          if (local) { if (local.action) ACTIONS[local.action]?.(); bot(local.text); renderChips(local.chips || CHIPS_BASE); return; }

          bot("I could not reach the backend. You can still open the Coach, explore the Platform, or request a demo.");
          renderChips(CHIPS_BASE);
        });

        /* Avoid white banner on bfcache restore */
        if ('scrollRestoration' in history) { history.scrollRestoration = 'manual' }
        window.addEventListener('pageshow', e => { if (e.persisted) window.scrollTo(0, 0) })

      });
    })();
  </script>

  <script src="assets/chat/about-ei-modal.js?v=1"></script>

  <!-- Initialize ReflectivAI Chat Widget -->
  <script type="module">
    import { createBus } from './assets/chat/core/eventBus.js';
    import { createModeStore } from './assets/chat/core/modeStore.js';
    import { createModeSwitcher } from './assets/chat/core/switcher.js';

    // Initialize core chat system
    const bus = createBus();
    const store = createModeStore(bus);
    const switcher = createModeSwitcher({ bus, store });

    // Make globally available for debugging
    window.ReflectivChat = { bus, store, switcher };

    // Auto-initialize when coach modal opens
    document.addEventListener('click', async (e) => {
      if (e.target.matches('[data-open-coach], [data-coach]') ||
        e.target.closest('[data-open-coach], [data-coach]')) {
        const modal = document.getElementById('coachModal');
        if (modal && !modal.dataset.initialized) {
          modal.dataset.initialized = 'true';
          await switcher.switchMode('sales-coach'); // Default mode
        }
      }
    });
  </script>

  <script>
    (function () {
      const btn = document.getElementById('navHamburger');
      const links = document.getElementById('navLinks');
      if (!btn || !links) return;
      btn.addEventListener('click', () => {
        const open = links.classList.toggle('open');
        btn.setAttribute('aria-expanded', open ? 'true' : 'false');
      });
    })();
  </script>


  <!-- Footer Visual Enhancement -->
</body>

</html>
